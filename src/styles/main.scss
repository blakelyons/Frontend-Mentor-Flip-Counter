// Import mixins first (needed by other files)
@use "./mixins/mixins" as *;

// Import base styles
@use "./base/variables";
@use "./base/reset";
@use "./base/typography";

// Import animations
@use "./animations/animations";

// Import component styles
@use "./components/components";

// Body background styles
body {
    // Apply transition only after page is loaded to prevent flickering
    &.loaded {
        @include transition;
    }

    .dark-mode-bg,
    .light-mode-bg {
        display: block;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background: var(--clr-darker-blue);
        background: var(--clr-main-background-color);
        z-index: 0;
        opacity: 1;
        content: "";
        // Prevent transitions on initial load
        transition: none;
        overflow: hidden;

        // Enable transitions after page loads
        body.loaded & {
            transition: all ease-in 1s;
        }
    }

    .dark-mode-bg:after {
        display: block;
        position: absolute;
        z-index: 0;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("../assets/images/milky-way-5295155_1920.jpg");
        background-size: cover;
        background-repeat: no-repeat;
        background-position: 0% -50%;
        content: "";
        opacity: 0.08;
    }

    .light-mode-bg {
        background: linear-gradient(
            0deg,
            hsl(236, 21%, 26%) 0%,
            hsl(217, 97%, 88%) 40%
        );
        opacity: 0;
    }

    .dark-mode-stars-bg,
    .light-mode-sun-bg {
        display: flex;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        content: "";
        margin: 0;
        padding: 0;
        z-index: 1;
    }

    .dark-mode-stars-bg {
        justify-content: center;
        align-items: center;
        svg {
            margin: 0 auto;

            @media screen and (min-width: 60em) {
                transform: scale(1.5);
            }
        }
    }

    &.light-mode {
        .dark-mode-bg {
            opacity: 0;
        }
        .light-mode-bg {
            opacity: 1;
            transition-delay: 500ms;
        }

        header h1 {
            color: hsl(217, 97%, 20%);
        }
    }

    #flip-counter-app {
        position: relative;
        z-index: 10;
    }
}

#flip-counter-app {
    display: grid;
    grid-template-rows: 1fr 1fr 1fr;
    gap: 1rem;
    width: 100%;
    justify-items: center;
    min-height: 100vh;
    margin: 0 auto;
    padding: 0;

    @media screen and (min-width: 60em) {
        grid-template-rows: 1fr 1fr 400px;
    }
}

.margin-top-small {
    margin-top: 1rem;
}

header,
.countdown-timer-container,
footer,
.light-mode-toggle {
    z-index: 10;
}

// Grid utilities
.grid {
    display: grid;
    position: relative;
    width: 100%;
    gap: 1rem;

    &.grid-cols-4 {
        grid-template-columns: 1fr 1fr 1fr 1fr;

        @media screen and (max-width: 40em) {
            gap: 0;
        }
    }

    .grid-item {
        display: block;
        position: relative;
        margin: 0;
        padding: 0;
        width: auto;
    }
}

.container {
    width: 100%;
    max-width: 1440px;
}

// Vue transition classes
.fade-enter-active,
.fade-leave-active {
    transition: opacity 0.5s ease;
}

.fade-enter-from,
.fade-leave-to {
    opacity: 0;
}
